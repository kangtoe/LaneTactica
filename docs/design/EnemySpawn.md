# 적 스폰 시스템

적이 생성되는 방식과 웨이브 진행을 정의하는 문서

---

## 핵심 요소

### 1. 티어 (Tier)
- 해당 적이 **스폰 풀에 추가되는 최소 웨이브 번호**
- 강한 적은 높은 티어 → 초반에 등장 불가

### 2. 가중치 (Weight)
- 스폰 풀에서 **선택될 확률**
- 높을수록 자주 선택됨

### 3. 포인트 (Point Cost)
- 웨이브 **예산 소모량**
- 강한 적일수록 높은 포인트

---

## 적 스폰 속성

| 적 유형 | 티어 | 가중치 | 포인트 |
|---------|------|--------|--------|
| 기본 적 | 1 | 높음 | 1 |
| 돌진 적 | 2 | 보통 | 2 |
| 탱커 적 | 3 | 낮음 | 3 |
| 원거리 적 | 4 | 낮음 | 2 |

---

## 웨이브 생성 과정

1. **웨이브 예산 설정** (웨이브 번호에 따라 증가)
2. **스폰 풀 구성** (현재 웨이브 ≥ 적 티어인 적만 포함)
3. **가중치 기반 랜덤 선택**
4. **포인트 소모** (예산 소진까지 반복)
5. **웨이브 구성 완료** → 순차 스폰

---

## 스폰 타이밍

### 웨이브 내 스폰
- 동시 스폰 아님
- 구성된 적들이 **순차적으로** 등장
- 일정 시간 간격

### 다음 웨이브 트리거
두 조건 중 하나 만족 시 다음 웨이브 시작:

1. **시간 경과**: 일정 시간 후 자동 진행
2. **전멸**: 현재 웨이브 모든 적 격파 (TODO - 모든 적 체력 총합의 50퍼센트 이하 로직으로 수정)

---

## 레인 선택

- **완전 랜덤** (분산 로직 없음)
- 같은 레인에 몰릴 수 있음
- 긴장감/변수 요소

---

## Flag Wave (대규모 웨이브)

- 매 **N번째 웨이브** (예: 10번째)
- 경고 메시지 표시
- 예산 증가 → 대량 스폰

---

## 웨이브 진행 흐름

```
레벨 시작
  ↓
[준비 시간]
  ↓
웨이브 1 스폰 시작
  ↓
(시간 경과 OR 50% 피해) → 웨이브 2 스폰 시작
  ↓
... 반복 ...
  ↓
Flag Wave → 예산 증가, 대량 스폰
  ↓
... 반복 ...
  ↓
마지막 웨이브 완료 → 레벨 클리어
```

---

## 레벨별 설정

각 레벨마다 설정 가능:
- 등장 가능한 적 종류 (스폰 풀 제한)
- 총 웨이브 수
- Flag Wave 간격
- 웨이브별 예산 곡선

---

## 참고 자료

- [Plants vs. Zombies: Technical Stuff](https://pvzcc.fandom.com/wiki/Plants_vs._Zombies:_The_Final_Showdown/Technical_Stuff)
- [Spawnable Zombies Wiki](https://plantsvszombies.fandom.com/wiki/Spawnable_Zombies)
- [Flag Zombie Wiki](https://plantsvszombies.fandom.com/wiki/Flag_Zombie)
